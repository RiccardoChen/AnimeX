<div
  class="flex flex-wrap justify-center items-center gap-x-4 gap-y-2 text-md font-semibold py-4 px-4 ">

  <h3 class="text-[#D6D5C6] font-bold text-lg mr-2 max-sm:mr-0 max-md:hidden max-sm:hidden ">Category:</h3>
  <button *ngFor="let category of categories"
          (click)="onSearchCategory(category)"
          [ngClass]="{
            'text-[#D5D1A1] border-b-2 border-[#D5D1A1] font-bold': searchCategory === category,
            'text-gray-400 hover:text-[#D6D5C6] hover:font-semibold': searchCategory !== category,
          }"
          class="pb-1 transition duration-200 ease-in-out focus:outline-none bg-transparent max-md:hidden max-sm:hidden ">  {{ category === '' ? 'All' : category }}
  </button>



  <div class="lg:hidden xl:hidden flex items-center gap-x-2">
    <h3 class="text-[#D5D1A1] font-medium ml-3 " >Category:</h3>
    <select class="rounded-md bg-[#2D3748] text-[#D5D1A1] border border-[#4A5568] p-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500" [(ngModel)]="searchCategory" (click)="onSearch()">
      <option *ngFor="let category of categories" [value]="category"> {{ category === '' ? 'All' : category }}</option>
    </select>
  </div>


  <div>
    <select class="rounded-md bg-[#2D3748] text-[#D5D1A1] border border-[#4A5568] p-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500" [(ngModel)]="searchYear" (click)="onSearch()">
      <option [value]="0">Year</option>
      <option *ngFor="let year of years">{{ year }}</option>
    </select>
  </div>
</div>



<div class=" text-[#D6D5C6] font-sans min-h-screen p-4">

  <div class="flex justify-center items-start mt-2 mb-8 px-4 gap-x-2">

    <div class="relative flex-grow max-w-sm">
      <input
        class="w-full h-10 rounded-md bg-gray-700 text-white placeholder-gray-400 px-4 focus:outline-none focus:ring-2 focus:ring-[#D5D1A1]"
        type="text"
        placeholder="Search..."
        [(ngModel)]="searchName"
      (input)="suggestsAnimeName()">

      <ul *ngIf="animeNameList.length > 0"
        class="absolute top-full left-0 right-0 bg-gray-800 border border-gray-600 rounded mt-1 z-10 overflow-y-auto max-h-48"
        > <li class="px-3 py-2 text-sm text-gray-300 hover:bg-gray-600 cursor-pointer" *ngFor="let name of animeNameList" (click)="onSelectAnime(name)">{{name}}</li>
      </ul>
    </div>

    <button
      class="h-10 w-12 border border-[#D6D5C6] rounded-md text-[#D6D5C6] bg-[#312E30] hover:bg-[#3A3739] hover:border-[#D5D1A1] transition duration-200 ease-in-out flex items-center justify-center"
      type="button"
      (click)="onSearch()">
      <i class="pi pi-search text-lg" style="background-color: transparent"></i></button>
  </div>

  <div class="container mx-auto py-8 px-4 md:px-6 lg:px-8 xl:px-10" *ngIf="animes?.length; else noData">
    <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 2xl:grid-cols-6 gap-3 md:gap-4 lg:gap-5 xl:gap-6">
      <div *ngFor="let anime of animes"
           class="group bg-gray-800 rounded-lg p-2 border border-gray-700 shadow-md hover:shadow-xl transition-all duration-300 flex flex-col relative overflow-hidden h-full min-h-[300px]">

        <a class="flex flex-col flex-grow cursor-pointer text-gray-100 no-underline"
           [title]="anime.name + ' details'"
           [routerLink]="['/animeDetail', anime.id]">

          <div class="relative overflow-hidden rounded-md mb-3">
            <img [src]="anime.img"
                 [alt]="anime.name + ' cover image'"
                 class="w-full h-48 sm:h-52 md:h-56 lg:h-60 xl:h-64 object-cover transition-transform duration-300 group-hover:scale-105"
                 loading="lazy">
          </div>

          <h2 class="mt-auto px-2 mb-8 font-medium text-sm md:text-base text-center line-clamp-2 group-hover:text-primary-400 transition-colors">
            {{ anime.name }}
          </h2>

          <div class="absolute bottom-2 inset-x-2 flex justify-between items-center text-xs md:text-sm">
            <div class="text-gray-400 flex items-center">
              <i class="pi pi-calendar mr-1 text-sm"></i>
              <span>{{ anime?.year }}</span>
            </div>

            <div class="text-red-400 flex items-center">
              <i class="pi pi-heart-fill mr-1 animate-pulse"></i>
              <span>{{ anime.profileIds?.length || 0 }}</span>
            </div>
          </div>
        </a>
      </div>
    </div>
  </div>


  <div class="flex items-center justify-center p-8 font-sans">
    <nav class="flex justify-center" aria-label="Pagination">
      <ul class="flex flex-wrap items-center gap-x-2 font-bold">

        <li>
          <button
            type="button"
            class="inline-flex items-center justify-center h-8 px-3 rounded-md text-sm transition-colors hover:bg-gray-100 hover:text-black "
            aria-label="Go to previous page" (click)="backtoFirstPage()" *ngIf="!isFirstPage">
            First
          </button>
        </li>

        <li>
          <button
            type="button"
            class="inline-flex items-center justify-center h-8 px-3 rounded-md text-sm transition-colors hover:bg-gray-100 hover:text-black"
            aria-label="Go to previous page" (click)="onClickPrev()" *ngIf="!isFirstPage">
            Previous
          </button>
        </li>

        <li>
        <span class="inline-flex items-center justify-center h-8 px-2 text-gray-500" *ngIf="showLeftEllipsis()">
          &hellip;
        </span>
        </li>

        <li>
          <button
            type="button"
            class="inline-flex items-center justify-center min-w-8 h-8 px-2 m-2 rounded-md text-sm transition-colors hover:bg-gray-100 hover:text-black focus:outline-none focus:ring-2 focus:ring-gray-200"
            *ngFor="let page of visiblePages" [ngClass]="{ 'bg-gray-100 text-black': paging === page }"
            (click)="onClickPage(page)">
            {{ page + 1 }}
          </button>
        </li>

        <li>
        <span class="inline-flex items-center justify-center h-8 px-2 text-gray-500" *ngIf="showRightEllipsis()">
          &hellip;
        </span>
        </li>

        <li>
          <button
            type="button"
            class="inline-flex items-center justify-center h-8 px-3 rounded-md text-sm transition-colors hover:bg-gray-100 hover:text-black"
            aria-label="Go to previous page" (click)="onClickNext()" *ngIf="!isLastPage">
            Next
          </button>
        </li>

        <li>
          <button
            type="button"
            class="inline-flex items-center justify-center h-8 px-3 rounded-md text-sm transition-colors hover:bg-gray-100 hover:text-black"
            aria-label="Go to previous page" (click)="gotoLastPage()" *ngIf="!isLastPage">
            Last
          </button>
        </li>

      </ul>
    </nav>

  </div>

  <ng-template #noData>
    <p id="noData"
       class="text-center text-2xl font-bold text-gray-500 mt-16 h-[300px] flex justify-center items-center"> Nessun
      risultato trovato.
    </p>
  </ng-template>

</div>


<app-footer></app-footer>
